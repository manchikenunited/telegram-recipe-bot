# 1. Базовый образ: Мы используем официальный, легковесный образ Python 3.11
FROM python:3.11-slim

# 2. Рабочая директория: Все последующие команды будут выполняться в этой папке внутри контейнера
WORKDIR /app

# 3. Установка зависимостей: Сначала копируем только requirements.txt
COPY requirements.txt .

# Устанавливаем зависимости. --no-cache-dir уменьшает размер финального образа.
RUN pip install --no-cache-dir -r requirements.txt

# 4. Копирование кода: Копируем остальные файлы проекта (main.py, ai_generator.py, db_manager.py и т.д.)
COPY . .

# 5. Команда запуска: Команда, которая будет выполняться при запуске контейнера.
# Запускаем основной файл бота.
CMD ["python3", "main.py"]
